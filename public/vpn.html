<!DOCTYPE html>
<html>
<head>
  <title>ğŸ  Residential VPN - Undetectable</title>
  <style>body{background:#000;color:#0f0;font-family:monospace;padding:3rem;max-width:1400px;margin:auto;text-align:center}
  button{padding:25px 50px;margin:20px;font-size:20px;background:#0f0;color:#000;border:none;border-radius:15px;cursor:pointer;font-weight:bold;box-shadow:0 0 30px #0f0}
  button:hover{transform:scale(1.1)}
  #status{padding:30px;background:#0a0;border-radius:20px;margin:40px;font-size:24px}
  #result{background:#111;padding:40px;border-radius:20px;max-height:700px;overflow:auto;border:3px solid #333;font-size:16px;white-space:pre-wrap}
  .ip{display:inline-block;background:#0f0;color:#000;padding:20px 35px;border-radius:40px;font-size:28px;font-weight:bold;margin:20px;box-shadow:0 0 40px #0f0}
  input,select{padding:20px;margin:20px;border:3px solid #0f0;background:#000;color:#0f0;font-size:20px;border-radius:15px;width:90%;max-width:600px}
  h1{font-size:5em;margin:40px 0;text-shadow:0 0 60px #0f0}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px;margin:50px 0}</style>
</head>
<body>
  <h1>ğŸŒ RESIDENTIAL VPN</h1>
  <div id="status">ğŸš€ Activating VPN Tunnel...</div>
  
  <div class="grid">
    <button onclick="vpnNY()">ğŸ‡ºğŸ‡¸ NEW YORK<br>RESIDENTIAL VPN</button>
    <button onclick="vpnUK()">ğŸ‡¬ğŸ‡§ LONDON<br>RESIDENTIAL VPN</button>
    <button onclick="testRealIP()">ğŸ•µï¸ REAL IP TEST</button>
    <button onclick="testWhoer()">ğŸ” WHOER.NET TEST</button>
  </div>

  <div>
    <input id="url" value="https://ipinfo.io/json" placeholder="Any URL">
    <select id="loc"><option value="newyork">ğŸ‡ºğŸ‡¸ New York</option><option value="london">ğŸ‡¬ğŸ‡§ London</option></select>
    <br><button onclick="vpnCustom()" style="padding:30px 80px;font-size:24px">ğŸ¯ PROXY NOW</button>
  </div>

  <div id="result">Click any VPN button â†’ See REAL USA/UK IP</div>

  <script>
    async function proxy(url, loc) {
      const res = await fetch(`/api/vpn?url=${encodeURIComponent(url)}&location=${loc}`);
      return await res.text();
    }

    async function vpnNY() { await test('https://ipinfo.io/json', 'newyork'); }
    async function vpnUK() { await test('https://ipinfo.io/json', 'london'); }
    async function testRealIP() { await test('https://httpbin.org/ip', document.getElementById('loc').value); }
    async function testWhoer() { await test('https://whoer.net', 'newyork'); }
    
    async function vpnCustom() {
      const url = document.getElementById('url').value;
      const loc = document.getElementById('loc').value;
      await test(url, loc);
    }

    async function test(url, loc) {
      try {
        document.getElementById('status').textContent = `ğŸ”„ VPN ${loc.toUpperCase()} â†’ ${url}`;
        document.getElementById('status').style.background = '#ff0';
        
        const result = await proxy(url, loc);
        document.getElementById('result').textContent = result;
        
        // Extract & highlight IP
        const ipMatch = result.match(/"ip":\s*"([0-9.]+)"/) || result.match(/Your IP[:\s]*([0-9.]+)/i);
        if (ipMatch) {
          const ip = ipMatch[1];
          document.getElementById('result').innerHTML = result.replace(new RegExp(ip.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), `<span class="ip">${ip}</span>`);
          document.getElementById('status').innerHTML = `âœ… VPN OK: ${ip} (${loc.toUpperCase()})`;
          document.getElementById('status').style.background = '#0f0';
        }
      } catch(e) {
        document.getElementById('result').textContent = `âŒ ${e.message}`;
        document.getElementById('status').textContent = 'âŒ VPN Error';
        document.getElementById('status').style.background = '#f00';
      }
    }

    // Auto-test
    setTimeout(() => testRealIP(), 1500);
  </script>
</body>
</html>
